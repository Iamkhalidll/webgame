<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player two selection</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="container">
        <h1>Player Two</h1>
        <form >
            <input type="text" id="playerTwo" required placeholder="Git User">
            <button>continue</button>
        </form> 
        <table style="display:none;">
              <tr>
                  <th><img src=""></th>
              </tr>
              <tr>
                  <td></td>
              </tr>
              <tr>
                  <td></td>
              </tr>
              <tr>
                  <td></td>
              </tr>
              <tr>
                  <td></td>
              </tr>
              <tr>
                  <td></td>
              </tr>
            </table>
    </div> 
    <script>
       document.forms[0].addEventListener("submit",async function(e){
           e.preventDefault();
           let input = document.getElementById("playerTwo").value;
           let url2 =`https://api.github.com/users/` + input;
           let response = await fetch(url2)
           let people = await response.json();
           console.log(people)
           let {name,login,avatar_url,followers,following,public_repos} = people
           console.log(name,login,avatar_url,followers,following,public_repos)
           
if( login==null){
    alert("invalid username")
    
}else{
    let score = Number(followers) + Number(following)+ (Number(public_repos)/2);
              console.log(score);
              let answer = eval(score);
              console.log(eval(score));
               let person1 ={
                   name:`name: ${name}`,
                   username :`username: ${login}`,
                   img:avatar_url,
                   repo:public_repos,
                   followers:followers,
                   following:following,
                   answer:answer
               }
               localStorage.setItem("user2",JSON.stringify(person1));
               document.querySelector("table").style.display="inline-block"
               document.querySelector("img").src = JSON.parse(localStorage.getItem("user2")).img;
               document.querySelectorAll("td")[0].innerHTML = JSON.parse(localStorage.getItem("user2")).name;
               document.querySelectorAll("td")[1].innerHTML = JSON.parse(localStorage.getItem("user2")).username;
               document.querySelectorAll("td")[2].innerHTML = JSON.parse(localStorage.getItem("user2")).followers;
               document.querySelectorAll("td")[3].innerHTML = JSON.parse(localStorage.getItem("user2")).following;
               document.querySelectorAll("td")[4].innerHTML = JSON.parse(localStorage.getItem("user2")).repo;
               window.location.replace("initial.html");
           }
           
           })
    </script>
</body>
</html>
